Decimal = require('big.js')

module.exports = ->
  class FixedCostModel
    constructor: (data = {}) ->
      @id = data.id
      @roundId = data.roundId
      @name = data.name
      @description = data.description
      @amount = new Decimal(data.amount or 0)

      Object.defineProperties @,
        amountCents:
          get: ->
            Number(@amount.times(100).toFixed(0))
          set: (amountCents) ->
            @amount = new Decimal(amountCents or 0).div(100)
        amountDollars:
          get: ->
            Number(@amount.toFixed(2))
          set: (amountDollars) ->
            @amount = new Decimal(amountDollars or 0)

      if typeof data.amountDollars != 'undefined'
        @amountDollars = data.amountDollars
      else
        @amountCents = data.amountCents

    serialize: ->
      {
        id: @id
        roundId: @roundId
        name: @name
        description: @description
        amount: @amount.toFixed(2)
      }
