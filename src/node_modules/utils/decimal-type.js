var Decimal = require('decimal');

module.exports = {
  set: function (newVal) {
    if (newVal instanceof Decimal) {
      return {
        type: 'decimal',
        val: newVal.toFixed(2),
      };
    }
    try {
      return {
        type: 'decimal',
        val: new Decimal(newVal).toFixed(2),
      };
    } catch (parseError) {
      return {
        type: typeof newVal,
        val: newVal,
      }
    }
  },
  compare: function (oldVal, newVal, attributeName) {
    return oldVal === newVal;
  },
  get: function (val) {
    return new Decimal(val);
  },
  'default': function () {
    return 0;
  },
};
