<div class="group-page-header">

  <md-card class="group-page-header-card">
    <div class="group-page-header__content" layout="column">
      <div class="group-page-header__first-row" layout="row" layout-align="start center">
        <h1 class="group-page-header__group-name">
          {{ group.name }}
        </h1>

        <span flex></span>


        <div class="group-page-header__settings-btn">
          <div layout="row" layout-align="center center" ng-if="currentUser.isAdminOf(group)">

            <div class="group-page-header__admin-more-btn" ng-click="openBottomSheet()">
              <ng-md-icon icon="settings"
                size="27"
                layout="column"
                layout-align="center center"
              ></ng-md-icon>
            </div>

            <md-menu md-offset="-20 20" md-position-mode="target-right target" class="group-page-header__admin-more-menu" ng-if="currentUser.isAdminOf(group)">
              <md-button class="md-icon-button group-page-header__admin-more-button" aria-label="More" ng-click="$mdMenu.open($event)">
                <ng-md-icon
                  icon="settings"
                  layout="column"
                  layout-align="center center"
                  class="group-page-header__admin-more-button-icon"
                >
                  <md-tooltip md-direction="top">Manage</md-tooltip>
                </ng-md-icon>
              </md-button>

              <md-menu-content>
                <md-menu-item>
                  <md-button ng-click="openManageFunds()">
                    <div layout="row" layout-align="start center">
                      <span md-menu-align-target class="group-page-header__admin-more-menu-item-label">Manage Funds</span>
                    </div>
                  </md-button>
                </md-menu-item>

                <md-menu-item>
                  <md-button ng-click="openInvitePeople()">
                    <div layout="row" layout-align="start center">
                      <span md-menu-align-target class="group-page-header__admin-more-menu-item-label">Invite People</span>
                    </div>
                  </md-button>
                </md-menu-item>

                <md-menu-item>
                  <md-button ng-click="openGroupSettings()">
                    <div layout="row" layout-align="start center">
                      <span md-menu-align-target class="group-page-header__admin-more-menu-item-label">Group Settings</span>
                    </div>
                  </md-button>
                </md-menu-item>

              </md-menu-content>
            </md-menu>

          </div>
        </div>
      </div>

      <div ng-if="group.description || currentUser.isAdminOf(group)" class="group-page-header__second-row">
        <p ng-if="group.fundingFreeze" class="group-page-header__funding-freeze"><i>Funding in this group is off</i></p>
        <div ng-if="group.description" class="group-page-header__description" layout="row" layout-align="start center" marked="group.description"></div>
        <p ng-if="!group.description" class="group-page-header__add-description"><a ng-click="openGroupSettings()"><i>+ Add a group purpose</i></a></p>
      </div>

      <div class="group-page-header__third-row" layout="row" layout-align="center end">
        <div layout="column" layout-align="center start" class="group-page-header__funds-overview-container">
          <div class="group-page-header__funds-overview-header">Your Available Funds</div>
          <div layout="row" layout-align="center center" class="group-page-header__funds-overview-content" >
            <div layout="row" class="group-page-header__personal-funds-container">
              <div layout="column" layout-align="center center">
                <span class="group-page-header__funds-overview-amount">{{ membership.balance | currency : group.currencySymbol : 0 }}
                  <span ng-if="group.addFunds"><a ng-href="{{ group.addFunds }}" target="_blank" class="group-page-header__funds-overview-add-funds">Add Funds</a></span>
                  <span class="group-page-header__funds-overview-amount-total">(<b>{{ group.balance + group.groupAccountBalance | currency : group.currencySymbol : 0  }}</b> in group)</span>
                </span>
              </div>

            </div>
          </div>
        </div>
        <div flex></div>
        <div layout="column" layout-align="right" class="">
        </div>
      </div>
    </div>

    <md-divider class="group-page-header__horizontal-divider"></md-divider>

    <md-tabs class="group-page-header__tabs" md-stretch-tabs="never" md-dynamic-height md-selected="tabSelected">
      <md-tab md-on-select="selectTab(0)">
        <md-tab-label>
          <span class="group-page-header__tab-label">All Buckets</span>
        </md-tab-label>
      </md-tab>
      <md-tab md-on-select="selectTab(1)">
        <md-tab-label>
          <span class="group-page-header__tab-label">Members</span>
        </md-tab-label>
      </md-tab>
      <md-tab md-on-select="selectTab(2)">
        <md-tab-label>
          <span class="group-page-header__tab-label">Activity</span>
        </md-tab-label>
      </md-tab>
    </md-tabs>

    <md-button class="md-fab group-page-header__create-bucket-fab" aria-label= "create" ng-click="createBucket()">
      <ng-md-icon icon="add"
        size="27"
        class="group-page-header__create-bucket-fab-icon"
        layout="column"
        layout-align="center center"
      ></ng-md-icon>
    </md-button>
  </md-card>
</div>
